C51 COMPILER V9.00   MAIN                                                                  03/04/2020 16:32:23 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN MAIN.OBJ
COMPILER INVOKED BY: C:\APPS\Keil\C51\BIN\C51.EXE MAIN.C BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          #include<math.h>
   3          sbit CS=P3^1;
   4          sbit SCLK=P3^0;
   5          sbit DIN=P3^2;
   6          float num=0;
   7          unsigned int j,t;
   8          void DAC(unsigned int adata)
   9          {
  10   1              char i;
  11   1                      adata<<=2;                              //10位数据升为12位，低2位无效
  12   1              CS=0;                                   //片选有效
  13   1              for(i=11;i>=0;i--)
  14   1              {
  15   2                              SCLK=0;         //时钟低电平
  16   2                              DIN=adata&(0x001<<i);   //按位将数据送入
  17   2                              SCLK=1;                         //时钟高电平
  18   2              }
  19   1              SCLK=0;                                 //时钟低电平
  20   1              CS=1;                                           //片选高电平,数据送DAC寄存器
  21   1      }
  22          void main()
  23          {
  24   1              CS=1;
  25   1              while(1)
  26   1              {
  27   2                      j=300;                                  //设置y轴零点对应的数字量
  28   2                      num=num+0.01;                   //x轴步长取0.01
  29   2                      if(num>=6.28)                   //x轴角度为0~2π
  30   2                      num=0;
  31   2                      t=sin(num)*200;                 //计算函数值并扩大200倍
  32   2                      j=j+t;                                  //合成函数值与零点数值
  33   2                      DAC(j);                                 //调D/A转换程序
  34   2              }
  35   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    179    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
