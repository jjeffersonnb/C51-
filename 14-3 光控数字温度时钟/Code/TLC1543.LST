C51 COMPILER V9.00   TLC1543                                                               02/05/2021 14:34:32 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE TLC1543
OBJECT MODULE PLACED IN TLC1543.OBJ
COMPILER INVOKED BY: C:\APPS\Keil\C51\BIN\C51.EXE TLC1543.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg52.h>
   2          #include<intrins.h>
   3          #define uint unsigned int 
   4          #define uchar unsigned char 
   5          sbit ADout=P1^0;
   6          sbit ADin=P1^1;
   7          sbit CS=P1^2;
   8          sbit CLK=P1^3;
   9          sbit EOC=P1^4;
  10          
  11          uint readAD(uchar port)                            
  12          {
  13   1              uchar ch,i,j;
  14   1              uint ad;
  15   1              ch=port;
  16   1              for(j=0;j<3;j++)                        //循环三次，确保转换数据准确
  17   1              {       
  18   2                      ad=0;
  19   2                      ch=port;
  20   2                      EOC=1;
  21   2                      CS=1;
  22   2                      CS=0;
  23   2                      CLK=0;
  24   2                      for(i=0;i<10;i++)  //TLC2543可改为12
  25   2                      {
  26   3                              if(ADout) ad|=0x01;
  27   3                              ADin=(bit)(ch&0x80);    
  28   3                              CLK=1;
  29   3                              CLK=0;
  30   3                              ch<<=1;
  31   3                              ad<<=1;
  32   3                      }
  33   2              }
  34   1              CS=1;                                                              /////////转换和读取数值
  35   1              while(!EOC);
  36   1              ad>>=1;
  37   1              return(ad);
  38   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     77    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
