C51 COMPILER V9.00   波形发_器                                                            08/22/2019 16:53:08 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE 波形发_器
OBJECT MODULE PLACED IN 波形发生器.OBJ
COMPILER INVOKED BY: C:\APPS\Keil\C51\BIN\C51.EXE 波形发生器.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg52.h>      //52系列单片机头文件
   2          #include <absacc.h>     //外部内存访问头文件
   3          #include <math.h>
   4          #define uchar unsigned char
   5          #define uint unsigned int 
   6          #define DAC XBYTE[0x7fff] //DAC0832的地址
   7          
   8          uchar KeyNo;  //按键号
   9          
  10          void delayms(uint t)                            
  11          {
  12   1              uchar i;
  13   1              while(t--) 
  14   1                      for(i=0;i<12;i++);        //即延时约0.t毫秒
  15   1      }
  16          
  17          void fangbo()   //方波
  18          {
  19   1              DAC=0x00;
  20   1              delayms(20);
  21   1              DAC=0xff;
  22   1              delayms(20);
  23   1      }
  24          
  25          void juchibo()  //锯齿波
  26          {
  27   1              uchar value = 0xff; 
  28   1              while(value > 0x00)
  29   1                      DAC=value--;
  30   1      }
  31          
  32          void sanjiaobo()   //三角波
  33          {
  34   1              uchar value = 0x00;
  35   1              while(value < 0xff)
  36   1                      DAC=value++;
  37   1              while(value > 0x00)
  38   1                      DAC=value--;
  39   1      }
  40          
  41          void tixingbao()   //梯形波
  42          {
  43   1              uchar value = 150;
  44   1              while(value > 0)
  45   1                      DAC=value--;
  46   1              delayms(30);
  47   1              while(value < 150)
  48   1                      DAC=value++;
  49   1              delayms(30);
  50   1      }
  51          
  52          void zhengxianbo()        //正弦波
  53          {
  54   1              uchar i;
  55   1              for(i=0;i<200;i++)
C51 COMPILER V9.00   波形发_器                                                            08/22/2019 16:53:08 PAGE 2   

  56   1                      DAC=125*sin(0.0314*i)+125;      
  57   1      }
  58          
  59          void main()
  60          {
  61   1              KeyNo=0;   //初值为0，表示没有按键
  62   1              IT0=1; EA=1; EX0=1;
  63   1              while(1) 
  64   1              {
  65   2                      if(KeyNo==1)fangbo();
  66   2              if(KeyNo==2)juchibo();
  67   2              if(KeyNo==3)sanjiaobo();
  68   2              if(KeyNo==4)tixingbao();
  69   2                      if(KeyNo==5)zhengxianbo();
  70   2              }
  71   1      }
  72          
  73          void INT_EX0() interrupt 0
  74          {
  75   1              if(++KeyNo==6)KeyNo=1;
  76   1      }       
  77          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    276    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
