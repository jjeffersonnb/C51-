C51 COMPILER V9.00   MAIN                                                                  08/22/2019 16:45:53 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\APPS\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #include <absacc.h>
   3          #include <math.h>
   4          #define DAC0832 XBYTE[0xfeff]
   5          unsigned char flag=1;
   6          void delay(unsigned int t)                                                                              /* 延时函数 */
   7          {             
   8   1                      while(t--); 
   9   1      } 
  10          void saw(void)                                                                                                                                                                          /* 锯齿波发生函数 */
  11          {                  
  12   1              unsigned char i; 
  13   1         for (i=0;i<250;i++)
  14   1              {
  15   2                                                                                      DAC0832=i;                                                                                                                              //进行D/A转换
  16   2                                                                                      delay(200);                                                                                                                     //延时一段时间
  17   2              }
  18   1      } 
  19          void square(void)                                                                                                                               /* 方波发生函数 */ 
  20          {             
  21   1               DAC0832=0x00;                                                                                                                                                  //输出低电平
  22   1         delay(40000);                                                                                                                                                        //延时一段时间
  23   1         DAC0832=0xfe;                                                                                                                                                        //输出高电平
  24   1         delay(40000);                                                                                                                                                        //延时一段时间
  25   1      } 
  26          void sanjiao(void)                                                                                                                                              /* 三角波发生函数 */
  27          {                  
  28   1      unsigned char i; 
  29   1         for (i=0;i<250;i++)
  30   1              {
  31   2                              DAC0832=i;                                                                                                                                      //进行D/A转换
  32   2                                      delay(100);                                                                                                                             //延时一段时间
  33   2              }
  34   1         for (i=250;i>0;i--)
  35   1              {
  36   2                              DAC0832=i;                      
  37   2                              delay(100);
  38   2              }
  39   1      } 
  40          void zhengxian(void)                                                                                                                            /* 正弦波发生函数 */
  41          {                  
  42   1              unsigned char i; 
  43   1                       for (i=0;i<200;i++)
  44   1                                                              DAC0832=125*sin(0.0314*i)+125; //计算函数值并进行转换
  45   1      } 
  46          void main()
  47           {
  48   1                              EX0=1;                                                                                                                                                                                                                          //开外部中断0
  49   1                              IT0=1;                                                                                                                                                                                                                  //边沿触发
  50   1                              EA=1; 
  51   1                              while(1)                                                                                                                                                                                                                //根据按键次数控制波形输出
  52   1                      { 
  53   2                                                                              if(flag==1)                     
  54   2                                                                                                                              square();
  55   2                                                                              if(flag==2)
C51 COMPILER V9.00   MAIN                                                                  08/22/2019 16:45:53 PAGE 2   

  56   2                                                                                                                              saw();
  57   2                                                                              if(flag==3)
  58   2                                                                                                                              sanjiao();
  59   2                                                                              if(flag==4)
  60   2                                                                                                                              zhengxian(); 
  61   2                      }
  62   1      }
  63          void int0() interrupt 0                                                                                                         //外部中断0中断函数
  64          { 
  65   1                              flag++;
  66   1                              if(flag==5)
  67   1                                                                                      flag=1;
  68   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    198    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
