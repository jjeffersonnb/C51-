C51 COMPILER V9.00   MAIN                                                                  02/02/2021 16:19:24 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\APPS\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          sbit CLOCK=P1^4;
   3          sbit START=P1^5;
   4          sbit EOC=P1^6;
   5          sbit OE=P1^7;
   6          unsigned char adcbuf;                   //定义变量存放A/D转换结果
   7          void ADC0809( )                                 //A/D转换子程序
   8          {
   9   1                              START=0;
  10   1                              START=1;                        //启动AD转换
  11   1                              while(!EOC);            //等待转换结束
  12   1                              START=0;
  13   1                              OE=1;                           //打开三态输出锁存器
  14   1                              P2=0xff;                        // P2口读数前先写1，确保读数准确
  15   1                              adcbuf=P2;                      //读P2口数据到存储变量
  16   1      }
  17          
  18          int main()
  19          {
  20   1              TMOD = 0x02;                            //T0工作在方式2
  21   1              TH0  = 256-5;
  22   1              TL0  = 256-5;                           //定时5us，ADC0809时钟100KHz
  23   1              IE   = 0x82;
  24   1              TR0  = 1;
  25   1              while(1)
  26   1              {
  27   2                      ADC0809();
  28   2                      P0=P2;                             //采集的电压值送至P0口显示
  29   2              }
  30   1      }
  31                  
  32          void Timer0_INT() interrupt 1   //T0的定时中断服务函数
  33          {
  34   1                  CLOCK = !CLOCK;             //ADC0809时钟信号
  35   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     43    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
